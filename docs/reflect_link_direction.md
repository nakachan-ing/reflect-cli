# Reflect CLI - ノートリンクにおける片方向と双方向の使い分け方針

このドキュメントでは、Reflect CLI におけるノート間リンク（linked_notesなど）の設計において、片方向リンクと双方向リンクの使い分け方針を整理する。

---

## ✅ 用語定義

| 用語 | 説明 |
|------|------|
| 片方向リンク | ノートAからノートBへの一方通行リンク。ノートBにはノートAの情報なし。 |
| 双方向リンク | ノートAとノートBがお互いをリンクし合う。|

---

## 🔄 それぞれの長所と短所

| 観点 | 片方向リンク | 双方向リンク |
|------|---------------|----------------|
| 実装のシンプルさ | ✅ 書き込み先が1つで済む | ⛔️ 両方のファイル編集が必要 |
| Reflect追跡性 | ⛔️ reflected_by がなければ追えない | ✅ 双方向ならどちらからも辿れる |
| Reflectの分岐対応 | ✅ 複数Reflectが許容しやすい | ⛔️ 一対多の管理が煩雑になることも |
| fleeting → fleeting の関係 | ⛔️ 派生元が見えづらい | ✅ 調査や問いの連鎖を明示できる |
| 思考ネットワーク表示 | ⭕️ 有向グラフで十分 | ✅ 無向グラフも視覚的に自然 |

---

## 🧩 Reflect CLIでのリンク方針まとめ

| リンクの関係 | 記録場所 | 推奨方向性 | 理由 |
|---------------|------------|------------------|------|
| fleeting → permanent | permanent側の `linked_notes` | ✅ 片方向 | 複数Reflectを許容するため。元ノートを編集せずに済む |
| fleeting → fleeting | 双方の `linked_notes` / `linked_by` | ✅ 双方向（推奨） | 思考の連鎖・分岐を明示化するため |
| permanent → permanent | 双方の `linked_notes` | ✅ 双方向（推奨） | 知識の構造化や索引ノートの形成に役立つ |

---

## ✨ 実装例

### 例：`permanent` が `fleeting` を参照

```yaml
# permanentのfrontmatter
linked_notes:
  - 20250402T1030_gc調査.md
```

### 例：`fleeting` が `fleeting` を参照

```yaml
# ノートA
linked_notes:
  - 20250402T1200_次の仮説.md

# ノートB
linked_by:
  - 20250402T1030_gc調査.md
```

---

## ✅ 結論

Reflect CLIでは、**リンクの目的に応じて片方向／双方向を適切に使い分ける設計が最適**。

- Reflect（昇華）は片方向リンクでシンプルに
- 思考の連鎖（fleeting間）や知識構造（permanent間）は双方向で育てる

この方針に基づき、CLI機能・frontmatter構造・構造可視化（zk structure）を整備していく。
